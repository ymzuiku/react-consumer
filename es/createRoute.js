"use strict";var __extends=this&&this.__extends||function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();exports.__esModule=!0;var React=require("react");function createRoute(c,p){var e,r;return r=React.Component,__extends(t,r),t.prototype.render=function(){var e=this.state,t=e.realChild,n=e.display;return e.isRenderChild?React.createElement("div",{style:{width:"100%",height:"100%",display:n}},t):null},(e=t).defaultProps={display:"block",sync:"sync",keep:!0},e;function t(e){var h=r.call(this,e)||this;h.haveChild=!1,h.state={display:"none",realChild:null,isRenderChild:!1},h.hiddenChild=function(){"none"!==h.state.display&&h.setState({display:"none"})},h.onHistoryUpdate=function(){var e=h.props,t=e.path,n=e.sync,i=e.component,a=e.display,r=e.keep,s=h.state.isRenderChild,o=p.checkPathMatch(t,c.state.paths),d=o[0],l=o[1];h.haveChild?s?d?h.showChild():l&&r?h.hiddenChild():(h.haveChild=!1,s&&h.setState({display:"none",isRenderChild:!1})):h.hiddenChild():d?(h.haveChild=!0,"sync"===n?h.setState({display:a,isRenderChild:!0,realChild:React.createElement(i,null)}):i().then(function(e){h.setState({display:a,isRenderChild:!0,realChild:React.createElement(e,null)})})):h.hiddenChild()},h.showChild=function(){var e=h.props.display;h.state.display!==e&&h.setState({display:e})},p.listen(h.onHistoryUpdate);var t=h.props,n=t.sync,i=t.component;if(n&&0===n.indexOf("preload")){var a=n.split(":")[1];a?setTimeout(function(){i()},1e3*Number(a)):i()}return h}}exports.createRoute=createRoute;